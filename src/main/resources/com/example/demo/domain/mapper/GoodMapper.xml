<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.domain.mapper.GoodMapper">
	<insert id="insertOne">
		INSERT INTO
		good(
			date,
			<choose>
				<when test="num == 1">
					good1
				</when>
				<when test="num == 2">
					good2
				</when>
				<when test="num == 3">
					good3
				</when>
			</choose>
			,
			registered_datetime
		)
		VALUES (
			#{date},
			#{good},
			CURRENT_TIMESTAMP
		);
	</insert>
	<select id="selectOne"
		resultType="com.example.demo.domain.model.Good">
		SELECT
			date,
			good1,
			good2,
			good3
		FROM
			good
		WHERE
			date = #{targetDate, jdbcType=DATE}
		;
	</select>
	<select id="count" resultType="integer">
		SELECT
			COUNT(*)
		FROM
			good
		WHERE
			date = #{targetDate, jdbcType=DATE}
	</select>
	<update id="updateOne"
		parameterType="com.example.demo.domain.model.Good">
		UPDATE
			good
		SET
			<choose>
				<when test="num == 1">
					good1
				</when>
				<when test="num == 2">
					good2
				</when>
				<when test="num == 3">
					good3
				</when>
			</choose>
			= #{good},
			update_datetime = CURRENT_TIMESTAMP
		WHERE
			date = #{date}
	</update>

</mapper>